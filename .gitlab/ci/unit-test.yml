pytest-unit:
  stage: unit-test
  image: python:3.12-slim
  before_script:
    - pip install -r requirements.txt
    - pip install pytest
  script:
    - pytest tests/
  rules:
    - if: $CI_COMMIT_BRANCH =~ /^feature\/.*$/
    - if: $CI_PIPELINE_SOURCE == "merge_request_event" && ($CI_MERGE_REQUEST_TARGET_BRANCH_NAME == "main" || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME == "dev")
    - if: $CI_COMMIT_BRANCH == "main"
